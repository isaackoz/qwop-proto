syntax = "proto3";

package qctxe.status.v1;

option go_package = "./qctxe";

service StatusService {
  rpc GetStatus(StatusRequest) returns (StatusResponse) {}
}

message StatusRequest {}

message ServiceHealth {
  bool up = 1;
  int64 last_checked = 2;
  string last_error = 3;
}

message ClientsHealth {
  ServiceHealth polygon = 1;
}


message StatusResponse {
  bool is_degraded = 1;
  bool is_fatal = 2;
  ServiceHealth database = 3;
  ServiceHealth redis = 4;
  ClientsHealth clients = 5;
}

